---
name: feedback
description: Worker에게 피드백을 전달합니다 - 리뷰 결과를 기반으로 수정/승인 지시를 보냅니다
argument-hint: "<feature-name> [feedback-message]"
allowed-tools: ["Bash", "Read", "Write", "AskUserQuestion"]
---

# Worker Feedback 커맨드

Worker Claude에게 리뷰 피드백을 전달합니다.

## 핵심 워크플로우

```
1. Worker 존재 확인
    │
    ▼
2. 피드백 내용 수집
    ├── 액션 타입 (continue/revise/complete)
    └── 피드백 메시지
    │
    ▼
3. Coordination Server로 전송
    │
    ▼
4. Worker의 .claude/feedback.md에 저장
    │
    ▼
5. 확인 메시지 출력
```

## 액션 타입

| 액션 | 설명 | Worker 상태 변경 |
|------|------|------------------|
| `continue` | 현재 방향으로 계속 진행 | running |
| `revise` | 수정 필요, 다시 작업 요청 | running |
| `complete` | 작업 승인, 완료 처리 | completed |

## 실행 방법

### Coordination Server API

```bash
curl -X POST http://localhost:3847/feedback \
  -H "Content-Type: application/json" \
  -d '{
    "worktree": "feature-auth",
    "feedback": "보안 취약점을 수정해주세요. SQL injection 가능성이 있습니다.",
    "action": "revise",
    "priority": "high"
  }'
```

### 피드백 파일 형식

Worker의 `.claude/feedback.md`에 저장되는 형식:

```markdown
# Feedback from Main Claude

**Time**: 2024-01-18T12:00:00Z
**Action Required**: [URGENT] REVISE

## Instructions

Please revise your previous work based on the feedback below.

## Feedback Details

보안 취약점을 수정해주세요. SQL injection 가능성이 있습니다.

구체적으로:
1. user_input을 직접 쿼리에 넣지 마세요
2. Prepared statement를 사용하세요
3. 입력 검증을 추가하세요

---

*This file was automatically generated by Team Claude. Read this feedback and incorporate it into your next session.*
```

## 사용 예시

```bash
# 간단한 피드백
/team-claude:feedback auth-feature "테스트 케이스를 추가해주세요"

# 수정 요청
/team-claude:feedback auth-feature --action revise "보안 취약점 수정 필요"

# 승인
/team-claude:feedback auth-feature --action complete "LGTM, 잘 작업했습니다"

# 긴급 피드백
/team-claude:feedback auth-feature --priority high "Production 버그입니다"

# 계속 진행 지시
/team-claude:feedback payment --action continue "방향은 좋습니다. 계속 진행하세요"
```

## 피드백 작성 가이드

### 효과적인 피드백

1. **구체적으로**: 어떤 파일, 어떤 라인, 무엇이 문제인지
2. **액션 가능하게**: Worker가 바로 수정할 수 있도록
3. **이유 설명**: 왜 수정이 필요한지

### 피드백 템플릿

```markdown
## 수정 필요 사항

### 1. [파일명:라인] 문제 제목
- **현재**: 현재 코드가 어떤지
- **수정**: 어떻게 수정해야 하는지
- **이유**: 왜 수정이 필요한지

### 2. ...
```

## 피드백 확인

Worker가 피드백을 확인했는지 확인:

```bash
# Worker 상태에서 feedback history 확인
curl -s http://localhost:3847/feedback/feature-auth | jq

# 직접 파일 확인
cat ../worktrees/feature-auth/.claude/feedback.md
```

## Worker 재시작

피드백을 전달한 후 Worker를 재시작해야 합니다:

```bash
# Worker 디렉토리에서
cd ../worktrees/feature-auth
claude
```

Worker가 시작하면 자동으로 `.claude/feedback.md`를 확인하고 지시에 따라 작업합니다.

## 관련 커맨드

- `/team-claude:review` - 코드 리뷰 수행
- `/team-claude:status` - Worker 상태 확인
- `/team-claude:spawn` - 새 Worker 생성
